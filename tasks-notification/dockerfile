FROM amazoncorretto:21-alpine

RUN mkdir /app
COPY ./build/libs/tasks-notification-*-SNAPSHOT.jar /app/notification-api.jar

ENV RABBITMQ_HOST localhost
ENV RABBITMQ_PORT 5672
ENV RABBITMQ_USERNAME user
ENV RABBITMQ_PASSWORD password

ENV POSTGRES_URL jdbc:postgresql://localhost:5432/postgres
ENV POSTGRES_USERNAME postgres
ENV POSTGRES_PASSWORD admin

ENV KEYCLOAK_ISSUER_URI=""
ENV KEYCLOAK_JWKS_URI=""

ENV EUREKA_HOSTNAME=localhost

ENV RABBITMQ_EXCHANGE notifications
ENV RABBITMQ_TASKS_QUEUE tasks
ENV RABBITMQ_TASKS_ROUTINGKEY tasks.key
ENV RABBITMQ_EMAIL_NOTIFICATIONS_QUEUE email_notifications
ENV RABBITMQ_EMAIL_NOTIFICATIONS_ROUTINGKEY email.notifications
ENV RABBITMQ_DELETE_NOTIFICATION_QUEUE delete_notification
ENV RABBITMQ_DELETE_NOTIFICATION_ROUTINGKEY delete.notification

ENV MAIL_SMTP_HOST smtp.gmail.com
ENV MAIL_SMTP_PORT 587
ENV MAIL_SMTP_USERNAME=""
ENV MAIL_SMTP_PASSWORD=""

ENV SERVER_PORT=8082

EXPOSE 8082
ENTRYPOINT ["java", "-jar","/app/notification-api.jar"]
